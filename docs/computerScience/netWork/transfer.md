# 传输层 tcp 和 udp

## udp

- TCP 是面向连接的，UDP 是面向无连接的

- 是为了在客户端和服务端维护连接，而建立一定的数据结构来维护双方交互的状态，用这样的数据结构来保证所谓的面向连接的特性

* TCP 提供可靠交付 , UDP 继承了 IP 包的特性，不保证不丢失，不保证按顺序到达

* TCP 是面向字节流的, UDP 继承了 IP 的特性，基于数据报的，一个一个地发，一个一个地收

* TCP 是可以有拥塞控制的

* TCP 其实是一个有状态服务

### 三大特点

- 沟通简单 , 不需要一肚子花花肠子（大量的数据结构、处理逻辑、包头字段）。前提是它相信网络世界是美好的，秉承性善论，相信网络通路默认就是很容易送达的，不容易被丢弃的

* 轻信他人。它不会建立连接，虽然有端口号，但是监听在这个地方，谁都可以传给他数据，他也可以传给任何人数据，甚至可以同时传给多个人数据

* 愣头青，做事不懂权变。不知道什么时候该坚持，什么时候该退让。它不会根据网络的情况进行发包的拥塞控制，无论网络丢包丢成啥样了，它该怎么发还怎么发

### 总结

- 如果将 TCP 比作成熟的社会人，UDP 则是头脑简单的小朋友。TCP 复杂，UDP 简单；TCP 维护连接，UDP 谁都相信；TCP 会坚持知进退；UDP 愣头青一个，勇往直前；UDP 虽然简单，但它有简单的用法。它可以用在环境简单、需要多播、应用层自己控制传输的地方。例如 DHCP、VXLAN、QUIC 等。

## TCP

- 顺序问题 ，稳重不乱；
- 丢包问题，承诺靠谱；
- 连接维护，有始有终；
- 流量控制，把握分寸；
- 拥塞控制，知进知退。

### 连接维护

- 请求 -> 应答 -> 应答之应答

#### why three times?

- 只要双方的消息都有去有回，就基本可以 而三次握手就基本确认可以

#### TCP 包的序号的问题

#### TCP 的四次挥手问题
