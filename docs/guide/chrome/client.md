# 浏览器安全

## 为什么 XMLHttpRequest 不能跨域请求资源

- 浏览器安全分为 网络安全 浏览器页面安全 浏览器系统安全

* 在没有安全保障的 Web 世界中，我们是没有隐私的，因此需要安全策略来保障我 们的隐私和数据的安全

* 同源策略 如果两个 URL 的协议、域名和端口都相同

### 同源策略主要表现在 DOM、Web 数据和网络这三个层面

#### dom 方面

- 同源页面可以进行操作 dom

#### 数据方面

- 同源策略限制了不同源的站点读取当前站点的 Cookie、IndexDB、 LocalStorage

#### 网络方面

- 同源策略限制了通过 XMLHttpRequest 等方式将站点的数据发送给不 同源的站点

### 安全和便利性的权衡

- 页面中可以嵌入第三方资源 注意：sameSite chrome 的限制

* 跨域资源共享和跨文档消息机制 window.postMessage

### 前端跨域的处理方式

- [九种跨域方式处理](https://mp.weixin.qq.com/s?__biz=Mzg2NDAzMjE5NQ==&mid=2247484197&idx=1&sn=e7af3acd85ef78875195098b2d9ea931&scene=21#wechat_redirect)

## 跨站脚本攻击(XSS):为什么 Cookie 中有 HttpOnly 属性

### 什么是 XSS 攻击？ cross site scripting

- 存储型 xss

* 反射型 xss Web 服务器不会存储反射型 XSS 攻击的恶意脚本，这是和存储型 XSS 攻击不同的地方

* 基于 DOM 的 XSS 攻击

### 如何防止 xss 攻击

- 服务器对输入脚本进行过滤或转码

* 充分利用 CSP

* 使用 HttpOnly 属性

### 总结

- XSS 攻击就是黑客往页面中注入恶意脚本，然后将页面的一些重要数据上传到恶意服务 器。常见的三种 XSS 攻击模式是存储型 XSS 攻击、反射型 XSS 攻击和基于 DOM 的 XSS 攻击。这三种攻击方式的共同点是都需要往用户的页面中注入恶意脚本，然后再通过恶意脚本将用 户数据上传到黑客的恶意服务器上。而三者的不同点在于注入的方式不一样，有通过服务器 漏洞来进行注入的，还有在客户端直接注入的。针对这些 XSS 攻击，主要有三种防范策略，第一种是通过服务器对输入的内容进行过滤或 者转码，第二种是充分利用好 CSP，第三种是使用 HttpOnly 来保护重要的 Cookie 信 息。

## CSRF 攻击:陌生链接不要随便点 跨站请求伪造

### 必须具备的条件

- 第一个，目标站点一定要有 CSRF 漏洞; 第二个，用户要登录过目标站点，并且在浏览器上保持有该站点的登录状态; 第三个，需要用户打开一个第三方站点，可以是黑客的站点，也可以是一些论坛

### 如何防止

- 充分利用好 Cookie 的 SameSite 属性

* 验证请求的来源站点

* CSRF Token

## 浏览器沙盒

![create](/Occam-s-Razor.github.io/sandChrome.jpg)
